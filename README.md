# Siebel CRM "Модернизация UI/UX Siebel CRM Уральские авиалинии"



Этот проект представляет собой набор автотестов для веб-приложения, реализованных на языке Python с использованием паттерна Page Object. 

В качестве фреймворка для тестирования используется **pytest**, который обеспечивает простоту написания и запуска тестов.


#### Оглавление

1. [Описание файлов и директорий](#структура-проекта)
2. [Переменные окружения](#переменные-окружения)
3. [Установка](#установка)
4. [Запуск тестов](#запуск-тестов)
5. [Отчет](#отчет)
6. [Непрерывная интеграция](#непрерывная-интеграция)


### Описание файлов и директорий

Этот проект представляет собой автоматизированные тесты на Python, использующие менеджер зависимостей Poetry и паттерн Page Object. Структура проекта организована таким образом, чтобы обеспечить легкость в поддержке и расширении тестов.
- `api_tests/`: Директория с апи-тестами
- `ui_tests/`: Директория с ui-тестами, в которой находятся:
    - `locators/`: Директория с локаторами
    - `pages/`: Директория с Page Object классами
    - `tests/`: Директория с тестами
- `Dockerfile`: Скрипт для сборки образа контейнера, содержащий инструкции по установке зависимостей и настройке окружения приложения.
- `.env_example`: Файл-шаблон для .env
- `poetry.lock`: Файл блокировки зависимостей, фиксирующий версии библиотек для обеспечения воспроизводимости проекта.
- `pyproject.toml`: Конфигурация Poetry и зависимости
- `pytest.ini`: Файл конфигурации для pytest, позволяющий задать параметры запуска тестов (директория для отчетов и кол-во повторных запусков тестов)


### Переменные окружения


Для корректной работы приложения необходимо настроить переменные окружения. Вы можете использовать файл `.env` для хранения конфиденциальных данных. Необходимые переменные:
```
- BASE_URL: URL-адрес вашего приложения.
- SOAP_URL: URL-адрес для доступа к SOAP API.
- LOGIN_PETROV: Логин администратора для доступа к приложению.
- PASS_PETROV: Пароль администратора для доступа к приложению.
```

### Установка

1. Клонируйте репозиторий: 
```shell
git clone https://git.u6.ru/itfbgroup/ural-airlines-oui-tests.git
```
2. Создайте файл .env в корневом каталоге проекта.
3. Добавьте переменные окружения в файл .env.
4. Установите зависимости, используя следующую команду:
```shell
poetry install
```
5. Запустите скрипт
### Запуск тестов

1. Для запуска всех тестов в селеноиде выполните следующую команду:

```shell
poetry run pytest
```
2. Для запуска всех тестов локально выполните следующую команду:

```shell
poetry run pytest --local
```
3. Для запуска смоук-тестов выполните следующую команду:
```shell
poetry run pytest -m smoke
```

4. Для запуска регрессионных тестов выполните следующую команду:
```shell
poetry run pytest -m regression
```
5. Для запуска тестов параллельно, например, в 2 потока, выполните следующую команду:
```shell
poetry run pytest -n 2
```
6. Чтобы собрать Docker-образ из Dockerfile и запустить контейнер:
 
    
Команда для сборки образа:
```
docker build -t имя_образа .
 ```
Запуск контейнера:
```
docker run имя_образа
```

### Отчет

При прогоне тестов автоматически сгенерируется в корне проекта allure-results. 
Чтобы сформировать allure-report, необходимо в терминале ввести команду
```shell
allure serve allure-results
```



### Непрерывная интеграция